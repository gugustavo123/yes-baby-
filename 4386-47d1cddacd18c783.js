(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4386],{29627:function(e){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sku"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nickname"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"summary"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"text"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"value_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rating_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createProductReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"sku"},value:{kind:"Variable",name:{kind:"Name",value:"sku"}}},{kind:"ObjectField",name:{kind:"Name",value:"nickname"},value:{kind:"Variable",name:{kind:"Name",value:"nickname"}}},{kind:"ObjectField",name:{kind:"Name",value:"summary"},value:{kind:"Variable",name:{kind:"Name",value:"summary"}}},{kind:"ObjectField",name:{kind:"Name",value:"text"},value:{kind:"Variable",name:{kind:"Name",value:"text"}}},{kind:"ObjectField",name:{kind:"Name",value:"ratings"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"rating_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"value_id"},value:{kind:"Variable",name:{kind:"Name",value:"value_id"}}}]}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"review"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nickname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"average_rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ratings_breakdown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:667}};i.loc.source={body:"mutation createReview ($sku: String!, $nickname: String!, $summary: String!, $text: String!, $value_id: String!, $rating_id: String!) {\n    createProductReview (\n        input: {\n            sku: $sku,\n            nickname: $nickname,\n            summary: $summary,\n            text: $text,\n            ratings: [\n                {\n                    id: $rating_id,\n                    value_id: $value_id\n                }\n            ]\n        }\n    ) {\n        review {\n            nickname\n            summary\n            text\n            average_rating\n            ratings_breakdown {\n                name\n                value\n            }\n        }\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,i)})),e.definitions&&e.definitions.forEach((function(e){n(e,i)}))}var a={};function t(e,i){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==i)return a}}i.definitions.forEach((function(e){if(e.name){var i=new Set;n(e,i),a[e.name.value]=i}})),e.exports=i,e.exports.createReview=function(e,i){var n={kind:e.kind,definitions:[t(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[i]||new Set,d=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){d.has(e)||(d.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(i){var a=t(e,i);a&&n.definitions.push(a)})),n}(i,"createReview")},32121:function(e){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ratingsReview"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productReviewRatingsMetadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value_id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:204}};i.loc.source={body:"query ratingsReview {\n    productReviewRatingsMetadata {\n        items {\n            id\n            name\n            values {\n                value\n                value_id\n            }\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,i)})),e.definitions&&e.definitions.forEach((function(e){n(e,i)}))}var a={};function t(e,i){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==i)return a}}i.definitions.forEach((function(e){if(e.name){var i=new Set;n(e,i),a[e.name.value]=i}})),e.exports=i,e.exports.ratingsReview=function(e,i){var n={kind:e.kind,definitions:[t(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[i]||new Set,d=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){d.has(e)||(d.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(i){var a=t(e,i);a&&n.definitions.push(a)})),n}(i,"ratingsReview")},7954:function(e,i,n){"use strict";n(67294);var a=n(41120),t=n(86010),r=n(85893),d=(0,a.Z)((function(e){return{product_list_divider:{position:"relative",display:"block","&::after":{content:'" "',display:"block",width:100,height:2,position:"absolute",left:0,top:"50%",marginTop:-1,backgroundColor:e.palette.primary.main}},center:{"&::after":{left:"50%",marginLeft:-50}},spacing:{padding:"2rem 0"},spacingSmall:{padding:"1rem 0"}}}));i.Z=function(e){var i=e.hasSpacing,n=void 0!==i&&i,a=e.hasSpacingSmall,l=void 0!==a&&a,o=e.center,s=void 0!==o&&o,u=e.className,m=d();return(0,r.jsx)("span",{className:(0,t.Z)(m.product_list_divider,n&&m.spacing,l&&m.spacingSmall,s&&m.center,u)})}},68531:function(e,i,n){"use strict";n.d(i,{Z:function(){return b}});var a=n(67294),t=n(14953),r=n(282),d=n(41749),l=n(41120),o=n(82175),s=n(74231),u=s.Ry().shape({nickname:s.Z_().required("Nome \xe9 obrigat\xf3rio"),summary:s.Z_().required("T\xedtulo \xe9 obrigat\xf3rio"),text:s.Z_().required("Descri\xe7\xe3o obrigat\xf3rio"),starValue:s.Z_().required("Avalia\xe7\xe3o obrigat\xf3ria")}),m=n(43871),c=n(20897),v=(n(32121),n(29627)),k=n.n(v),f=n(25617),p=n(85893),g=(0,l.Z)((function(e){return{form:{width:"100%",marginTop:e.spacing(2)},submit:{margin:"2rem 0"},test:{border:"2px solid blue"},textarea:{width:"100%",height:"10rem",border:"1px solid ".concat(e.palette.action.disabled),background:e.palette.background.default,borderRadius:"0.3rem",resize:"none",fontFamily:"lato, verdana",fontSize:"1rem",padding:"0.8rem 0.8rem","&:focus":{borderRadius:"0.3rem",outline:"1px solid red"},"&:hover":{border:"1px solid ".concat(e.palette.text.primary)}}}})),b=function(e){var i=e.product.sku,n=e.onSuccess,l=e.loading,s=void 0!==l&&l,v=(e.error,e.data),b=void 0===v?{}:v,N=g(),S=(0,f.v9)((function(e){return e.auth})),h=S.isAuth,y=S.customer,x=(0,a.useCallback)((function(e,a){var t=e.nickname,r=e.text,d=e.summary,l=e.reviewRatings,o=e.reviewRatingId,s=e.starValue,u=a.setSubmitting;if(!h)return alert("Voc\xea precisa estar logado para fazer uma avalia\xe7\xe3o!");var m=null===l||void 0===l?void 0:l.find((function(e){return parseInt(e.value,10)===parseInt(s,10)}));return(0,c.Z)({},!1,"catalog").mutate({mutation:k(),variables:{nickname:t,sku:i,text:r,summary:d,value_id:null===m||void 0===m?void 0:m.value_id,rating_id:o}}).then((function(){n(),u(!1)})).catch((function(){u(!1)})),!0}),[h,i]);if(s)return"Loading...";var w=b.productReviewRatingsMetadata.items[0].id,V=b.productReviewRatingsMetadata.items[0].values;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(o.J9,{initialValues:{nickname:null!==y&&void 0!==y&&y.firstname?"".concat(null===y||void 0===y?void 0:y.firstname," ").concat(null===y||void 0===y?void 0:y.lastname):"",text:"",starValue:"",summary:"",comment:"",reviewRatingId:w,reviewRatings:V},validationSchema:u,onSubmit:x,children:function(e){var i=e.submitForm,n=e.setFieldValue,a=e.errors,l=e.isSubmitting;return(0,p.jsxs)(o.l0,{className:N.form,children:[(0,p.jsxs)(d.Z,{container:!0,spacing:2,children:[(0,p.jsx)(d.Z,{item:!0,xs:12,children:(0,p.jsx)(o.gN,{component:t.nv,name:"nickname",type:"text",label:"Nome",variant:"outlined",margin:"normal",fullWidth:!0,disabled:l})}),(0,p.jsx)(d.Z,{item:!0,xs:12,children:(0,p.jsx)(o.gN,{component:t.nv,name:"summary",type:"text",label:"T\xedtulo",variant:"outlined",margin:"normal",disabled:l,fullWidth:!0})}),(0,p.jsxs)(d.Z,{item:!0,xs:12,children:[(0,p.jsx)(m.Z,{name:"simple-controlled",precision:1,size:"large",disabled:l,onChange:function(e,i){n("starValue",i)}}),a.starValue&&(0,p.jsx)("p",{className:"MuiFormHelperText-root MuiFormHelperText-contained Mui-error",children:a.starValue})]}),(0,p.jsx)(d.Z,{item:!0,xs:12,children:(0,p.jsx)(o.gN,{component:t.nv,name:"text",multiline:!0,type:"textarea",label:"Coment\xe1rio",variant:"outlined",disabled:l,margin:"normal",rows:4,fullWidth:!0,placeholder:"Deixe seu coment\xe1rio..."})})]}),(0,p.jsx)(r.Z,{type:"submit",fullWidth:!0,variant:"contained",size:"large",color:"primary",disabled:l,onClick:i,className:N.submit,children:l?"Salvando Avalia\xe7\xe3o":"Criar Avalia\xe7\xe3o"})]})}})})}}}]);